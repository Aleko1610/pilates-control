<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pilates Control MVP</title>

  <link rel="stylesheet" href="styles.css">

  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/index.global.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

  <div class="layout">

    <aside class="sidebar">
      <h2 class="logo">PilatesControl</h2>

      <ul class="menu">
        <li onclick="mostrarSeccion('dashboard')">ðŸ“Š Dashboard</li>
        <li onclick="mostrarSeccion('calendarView')">ðŸ“… Calendario</li>
        <li onclick="mostrarSeccion('alumnos')">ðŸ‘¤ Alumnos</li>
        <li onclick="mostrarSeccion('planes')">ðŸ’³ Planes</li>
        <li onclick="mostrarSeccion('clases')">ðŸ“… Clases</li>
      </ul>
    </aside>

    <main class="main-content">

      <!-- ========== DASHBOARD ========== -->
      <section id="dashboard" style="display:block;">
        <h2>Dashboard</h2>

        <div class="kpi-container">

          <div class="kpi-card success">
            <h3>Alumnos Activos</h3>
            <p id="dashTotalAlumnos">0</p>
          </div>

          <div class="kpi-card info">
            <h3>Clases Hoy</h3>
            <p id="dashClasesHoy">0</p>
          </div>

          <div class="kpi-card warning">
            <h3>OcupaciÃ³n Hoy</h3>
            <p id="dashOcupacion">0%</p>
          </div>

          <div class="kpi-card danger full">
            <h3>Vencimientos PrÃ³ximos</h3>
            <ul id="dashVencimientos"></ul>
          </div>

        </div>

        <div class="charts-container">
          <div class="chart-card">
            <h3>OcupaciÃ³n (Ãšltimos 7 dÃ­as)</h3>
            <canvas id="chartOcupacion"></canvas>
          </div>

          <div class="chart-card">
            <h3>Asistencia</h3>
            <canvas id="chartAsistencia"></canvas>
          </div>

          <div class="chart-card">
            <h3>Vencimientos por Semana</h3>
            <canvas id="chartVencimientos"></canvas>
          </div>
        </div>
      </section>

      <!-- ========== CALENDARIO ========== -->
      <section id="calendarView" style="display:none;">
        <h2>Calendario de Clases</h2>
        <div id="calendar"></div>
      </section>

      <!-- ========== ALUMNOS ========== -->
      <section id="alumnos" style="display:none;">
        <h2>Alumnos</h2>

        <form id="formAlumno">
          <input
            id="nombre"
            placeholder="Nombre"
            required
            maxlength="15"
            pattern="[A-Za-zÃÃ‰ÃÃ“ÃšÃ¡Ã©Ã­Ã³ÃºÃ‘Ã±\\s]+"
            title="Solo letras (mÃ¡x. 15)"
          >

          <input
            id="apellido"
            placeholder="Apellido"
            required
            maxlength="15"
            pattern="[A-Za-zÃÃ‰ÃÃ“ÃšÃ¡Ã©Ã­Ã³ÃºÃ‘Ã±\\s]+"
            title="Solo letras (mÃ¡x. 15)"
          >

          <input
            id="dni"
            placeholder="DNI"
            required
            maxlength="8"
            pattern="[0-9]+"
            title="Solo nÃºmeros, mÃ¡ximo 8"
          >

          <input
            id="telefono"
            placeholder="TelÃ©fono"
            required
            maxlength="15"
            pattern="[0-9+]+"
            title="Solo nÃºmeros y +, mÃ¡ximo 15"
          >

          <input
            id="email"
            placeholder="Email"
            required
            type="email"
          >

          <button type="submit">Agregar Alumno</button>
        </form>

        <table>
          <thead>
            <tr>
              <th>Sel.</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>DNI</th>
              <th>TelÃ©fono</th>
              <th>Email</th>
              <th>Plan</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="tablaAlumnos"></tbody>
        </table>
      </section>

      <div id="modalAlumno" class="modal">
        <h3>Editar Alumno</h3>
        <input type="text" id="editNombre" />
        <input type="text" id="editApellido" />
        <input type="text" id="editDni" />
        <input type="text" id="editTel" />
        <input type="email" id="editEmail" />
        <br><br>
        <button onclick="guardarEdicionAlumno()">Guardar</button>
        <button onclick="cerrarModalAlumno()">Cancelar</button>
      </div>

      <div id="modalPlan" class="modal">
        <h3>Asignar Plan</h3>
        <select id="selectPlan"></select>
        <br><br>
        <button onclick="confirmarAsignacion()">Confirmar</button>
        <button onclick="cerrarModal()">Cancelar</button>
      </div>

      <!-- ========== PLANES ========== -->
      <section id="planes" style="display:none;">
        <h2>Planes</h2>

        <form id="formPlan">
          <input type="text" id="planNombre" placeholder="Nombre" required />
          <select id="planTipo" required>
            <option value="">Tipo</option>
            <option value="tiempo">Tiempo</option>
            <option value="creditos">CrÃ©ditos</option>
            <option value="mixto">Mixto</option>
          </select>
          <input type="number" id="planPrecio" placeholder="Precio" required />
          <input type="number" id="planCreditos" placeholder="CrÃ©ditos" />
          <input type="number" id="planDuracion" placeholder="DuraciÃ³n en dÃ­as" />
          <button type="submit">Agregar</button>
        </form>

        <table>
          <thead>
            <tr><th>Nombre</th><th>Tipo</th><th>Precio</th><th>CrÃ©ditos</th><th>DÃ­as</th><th>Acciones</th></tr>
          </thead>
          <tbody id="tablaPlanes"></tbody>
        </table>
      </section>

      <div id="modalPlanEditar" class="modal">
        <h3>Editar Plan</h3>
        <input type="text" id="editPlanNombre" />
        <select id="editPlanTipo">
          <option value="tiempo">Tiempo</option>
          <option value="creditos">CrÃ©ditos</option>
          <option value="mixto">Mixto</option>
        </select>
        <input type="number" id="editPlanPrecio" />
        <input type="number" id="editPlanCreditos" />
        <input type="number" id="editPlanDuracion" />
        <br><br>
        <button onclick="guardarEdicionPlan()">Guardar</button>
        <button onclick="cerrarModalPlanEditar()">Cancelar</button>
      </div>

      <!-- ========== CLASES ========== -->
      <section id="clases" style="display:none;">
        <h2>Clases</h2>

        <form id="formClase">
          <input type="date" id="claseDia" required />
          <input type="time" id="claseHora" required />
          <input type="number" id="claseCupo" placeholder="Cupo" required />
          <input type="text" id="claseProfesor" placeholder="Profesor" />
          <input type="text" id="claseTipo" placeholder="Tipo Clase" value="Pilates" />
          <button type="submit">Crear Clase</button>
        </form>

        <table>
          <thead><tr><th>DÃ­a</th><th>Hora</th><th>Profesor</th><th>Cupo</th><th>Reservados</th><th>Acciones</th></tr></thead>
          <tbody id="tablaClases"></tbody>
        </table>
      </section>

      <div id="modalClaseEditar" class="modal">
        <h3>Editar Clase</h3>
        <input type="date" id="editClaseDia" />
        <input type="time" id="editClaseHora" />
        <input type="number" id="editClaseCupo" />
        <input type="text" id="editClaseProfesor" />
        <input type="text" id="editClaseTipo" />
        <br><br>
        <button onclick="guardarEdicionClase()">Guardar</button>
        <button onclick="cerrarModalClaseEditar()">Cancelar</button>
      </div>

      <div id="modalReservas" class="modal">
  <h3>Reservas de Clase</h3>

  <label>Agregar alumno:</label>
  <select id="selectAlumnoReserva"></select>
  <button onclick="agregarReservaDesdeModal()">Agregar</button>

  <br><br>

  <table>
    <thead>
      <tr><th>Alumno</th><th>Presente</th><th>Acciones</th></tr>
    </thead>
    <tbody id="tablaReservasClase"></tbody>
  </table>

  <br>
  <button onclick="cerrarModalReservas()">Cerrar</button>
</div>

    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
